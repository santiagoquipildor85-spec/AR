    <script>
        // Inicializar sistema completo
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Inicializando sistema AR...');
            
            // Variables globales
            let detector = null;
            let isRunning = false;
            let stream = null;
            let animationId = null;
            
            // Elementos DOM
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const arOverlay = document.getElementById('arOverlay');
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            const statusDot = document.querySelector('.status-dot');
            const backBtn = document.getElementById('backBtn');
            
            // Funciones auxiliares
            function updateStatus(text, state = 'ready') {
                if (statusText) statusText.textContent = text;
                if (statusDot) {
                    statusDot.className = 'status-dot';
                    if (state === 'active') statusDot.classList.add('active');
                    if (state === 'detecting') statusDot.classList.add('detecting');
                }
            }
            
            function clearAROverlay() {
                if (arOverlay) {
                    while (arOverlay.firstChild) {
                        arOverlay.removeChild(arOverlay.firstChild);
                    }
                }
            }
            
            function setupCanvas() {
                canvas.width = video.videoWidth || 1280;
                canvas.height = video.videoHeight || 720;
                canvas.style.width = '100%';
                canvas.style.height = '100%';
            }
            
            // Iniciar AR
            async function startAR() {
                try {
                    updateStatus('Iniciando cámara...', 'detecting');
                    console.log('Solicitando acceso a cámara...');
                    
                    stream = await navigator.mediaDevices.getUserMedia({
                        video: {
                            facingMode: 'environment',
                            width: { ideal: 1280 },
                            height: { ideal: 720 }
                        }
                    });
                    
                    video.srcObject = stream;
                    video.play();
                    
                    video.addEventListener('loadedmetadata', () => {
                        setTimeout(() => {
                            setupCanvas();
                            isRunning = true;
                            updateStatus('Detectando...', 'active');
                            detectLoop();
                            console.log('AR iniciado correctamente');
                        }, 500);
                    });
                    
                } catch (error) {
                    console.error('Error al iniciar AR:', error);
                    updateStatus('Error: ' + error.message, 'ready');
                }
            }
            
            // Detener AR
            function stopAR() {
                isRunning = false;
                
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                    stream = null;
                }
                
                if (video.srcObject) {
                    video.srcObject = null;
                }
                
                clearAROverlay();
                updateStatus('Toca para iniciar', 'ready');
                console.log('AR detenido');
            }
            
            // Toggle AR
            function toggleAR() {
                if (isRunning) {
                    stopAR();
                } else {
                    startAR();
                }
            }
            
            // Loop de detección simplificado
            function detectLoop() {
                if (!isRunning || !video.videoWidth) {
                    return;
                }
                
                try {
                    // Dibujar frame
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    // Detección simulada para pruebas
                    if (Math.random() > 0.97) {
                        showTestDetection();
                    }
                    
                } catch (error) {
                    console.error('Error en detección:', error);
                }
                
                if (isRunning) {
                    animationId = requestAnimationFrame(detectLoop);
                }
            }
            
            // Mostrar detección de prueba
            function showTestDetection() {
                const testCard = document.createElement('div');
                testCard.style.cssText = `
                    position: absolute;
                    left: 50%;
                    top: 30%;
                    transform: translateX(-50%);
                    background: #2ecc71dd;
                    color: white;
                    padding: 12px 16px;
                    border-radius: 8px;
                    font-family: 'Segoe UI', Arial, sans-serif;
                    pointer-events: none;
                    z-index: 10;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
                    text-align: center;
                `;
                
                testCard.innerHTML = `
                    <div style="margin-bottom: 2px;">
                        <span style="margin-right: 6px; font-size: 16px;">👋</span>
                        <span style="font-weight: bold; font-size: 16px;">Hola</span>
                    </div>
                    <div style="font-size: 12px; opacity: 0.9; font-weight: normal;">
                        DAyE 2025 Expo
                    </div>
                `;
                
                arOverlay.appendChild(testCard);
                
                // Remover después de 3 segundos
                setTimeout(() => {
                    if (testCard.parentNode) {
                        testCard.parentNode.removeChild(testCard);
                    }
                }, 3000);
                
                updateStatus('¡Imagen detectada!', 'detecting');
            }
            
            // Event listeners
            if (statusIndicator) {
                statusIndicator.addEventListener('click', toggleAR);
                console.log('Event listener agregado al indicador');
            }
            
            if (backBtn) {
                backBtn.addEventListener('click', () => {
                    stopAR();
                    window.location.href = 'index.html';
                });
            }
            
            // Configuración inicial
            updateStatus('Toca para iniciar', 'ready');
            console.log('Sistema AR inicializado correctamente');
        });
    </script>          const testCard = document.createElement('div');
                testCard.style.cssText = `
                    position: absolute;
                    left: 50%;
                    top: 30%;
                    transform: translateX(-50%);
                    background: #2ecc71dd;
                    color: white;
                    padding: 12px 16px;
                    border-radius: 8px;
                    font-family: 'Segoe UI', Arial, sans-serif;
                    pointer-events: none;
                    z-index: 10;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
                    text-align: center;
                `;
                
                testCard.innerHTML = `
                    <div style="margin-bottom: 2px;">
                        <span style="margin-right: 6px; font-size: 16px;">👋</span>
                        <span style="font-weight: bold; font-size: 16px;">Hola</span>
                    </div>
                    <div style="font-size: 12px; opacity: 0.9; font-weight: normal;">
                        DAyE 2025 Expo
                    </div>
                `;
                
                arOverlay.appendChild(testCard);
                
                // Remover después de 3 segundos
                setTimeout(() => {
                    if (testCard.parentNode) {
                        testCard.parentNode.removeChild(testCard);
                    }
                }, 3000);
                
                updateStatus('¡Imagen detectada!', 'detecting');
            }
            
            // Event listeners
            if (statusIndicator) {
                statusIndicator.addEventListener('click', toggleAR);
                console.log('Event listener agregado al indicador');
            }
            
            if (backBtn) {
                backBtn.addEventListener('click', () => {
                    stopAR();
                    window.location.href = 'index.html';
                });
            }
            
            // Configuración inicial
            updateStatus('Toca para iniciar', 'ready');
            console.log('Sistema AR inicializado correctamente');
        });
    </script>
</body>
</html>
